<div class="container-fluid">
  <div class="panel panel-primary">
    <div *ngIf="context.action == 'create'" class="panel-heading">Crear Usuario</div>
    <div *ngIf="context.action == 'update'" class="panel-heading">Editar Usuario</div>
    <div class="panel-body">

      <div class="form-horizontal">
        <div class="panel">
          <div class="panel-body">
                        
            <div class="form-group">
              <label class="control-label">RUT: </label>
              <input type="text" class="form-control" [(ngModel)]="context.user.rut">
            </div>
            
            <div class="form-group">
              <label class="control-label">Nombre: </label>
               <input type="text" class="form-control" [(ngModel)]="context.user.name">
            </div>

            <div class="form-group">
              <label class=" control-label">Perfil:</label>
              <select class="form-control" (change)="context.user.role = $event.target.value" [(ngModel)]="context.user.role">
                  <option *ngFor="let profile of humanizedUserRoles | mapToIterable" [value]="profile.key">{{profile.val}}</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="control-label">Contrase単a: </label>
               <input type="password" class="form-control" [(ngModel)]="context.password">
            </div>
            
            
            <div class="form-group">
              <label class="control-label">Compa単ias:</label>
              <tag-input [(ngModel)]="context.user.companies" 
                         [identifyBy]="'_id'" 
                         [displayBy]="'name'"
                         [onlyFromAutocomplete]="true" 
                         theme="dark" 
                         placeholder="+ Compa単ia" 
                         secondaryPlaceholder="+ Compa単ia">
                  <tag-input-dropdown 
                          [showDropdownIfEmpty]="true"
                          [appendToBody]="false"
                          [identifyBy]="'_id'"
                          [displayBy]="'name'"
                          [autocompleteItems]="allCompanies">
                  </tag-input-dropdown>
              </tag-input>
            </div>
          </div>

          <div class="panel-footer text-right">
            <button (click)="closeModal()" class="btn btn-transparent"><span class="fa fa-arrow-left"></span> Cancelar</button>
            <button *ngIf="context.action == 'create'" (click)="createUser()" type="button" class="btn btn-transparent btn-transparent-primary"><span class="fa fa-share"></span> Agregar</button>
            <button *ngIf="context.action == 'update'" (click)="updateUser()" type="button" class="btn btn-transparent btn-transparent-primary"><span class="fa fa-share"></span> Actualizar</button>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>




