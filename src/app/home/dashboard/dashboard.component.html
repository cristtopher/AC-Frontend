<header class="page-header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 col-md-9">
        <h1 class="page-header-heading"><span class="typcn typcn-chart-line page-header-heading-icon"></span> Dashboard (Sector: {{currentSector?.name}})</h1>
        <p class="page-header-description">La siguiente pagina provee un resumen de los registros de acceso.</p>
      </div>
    </div>
  </div>
</header>

<div class="container-fluid">
  
  <!-- row -->
  <div class="row">
        
    <div class="col-sm-6 col-lg-3">
      <div class="widget widget-statistic widget-primary">
        <header class="widget-statistic-header">En Planta</header>
        <div class="widget-statistic-body">
          <span class="widget-statistic-value">{{ statistics.totalRegisters }}</span>
          <span class="widget-statistic-description">Numero  <strong>total</strong> de personas en planta</span>
          <span class="widget-statistic-icon fa fa-industry"></span>
        </div>
      </div>
    </div>
    
    <div class="col-sm-6 col-lg-3">
      <div class="widget widget-statistic widget-success">
        <header class="widget-statistic-header">Empleados</header>
        <div class="widget-statistic-body">
          <span class="widget-statistic-value">30%</span>
          <span class="widget-statistic-description">Porcentaje de <strong>empleados</strong> en planta</span>
          <span class="widget-statistic-icon fa fa-user"></span>
        </div>
      </div>
    </div>
    
    <div class="col-sm-6 col-lg-3">
      <div class="widget widget-statistic widget-faded-blue">
        <header class="widget-statistic-header">Contratistas</header>
        <div class="widget-statistic-body">
          <span class="widget-statistic-value">13%</span>
          <span class="widget-statistic-description">Porcentaje de <strong>contratistas</strong> en planta</span>
          <span class="widget-statistic-icon fa fa-user-o"></span>
        </div>
      </div>
    </div>
    
    <div class="col-sm-6 col-lg-3">
      <div class="widget widget-statistic widget-purple">
        <header class="widget-statistic-header">Visitas</header>
        <div class="widget-statistic-body">
          <span class="widget-statistic-value">57%</span>
          <span class="widget-statistic-description">Porcentaje de <strong>visitas</strong> en planta</span>
          <span class="widget-statistic-icon fa fa-eye"></span>
        </div>
      </div>
    </div>
    
  </div>
  <!-- end row -->
  
  
  <!-- row -->
  <div class="row">
        
    <!-- pie-chart -->
    <div class="col-sm-4 col-lg-4">
      <div class="widget widget-default">
        <header class="widget-header">Distribuci√≥n por perfil</header>
        
        <div class="widget-body">
          <div style="display: block">            
            <canvas baseChart [chartType]="'pie'" [labels]="profileDistPieChart.labels" [data]="profileDistPieChart.data"></canvas>
          </div>          
        </div>
        
      </div>
    </div>
    
    <!-- bar-chart -->
    <div class="col-sm-8 col-lg-8">
      <div class="widget widget-default">
        <header class="widget-header">Eventos por dia</header>
        
        <div class="widget-body">
          <div style="display: block">
            <canvas baseChart
                    [datasets]="registersPerWeekBarChart.series"
                    [labels]="registersPerWeekBarChart.labels"
                    [options]="{ scaleShowVerticalLines: false, responsive: true }"
                    [legend]="true"
                    [chartType]="'bar'"></canvas>  
          </div>
        </div>
      </div>
    </div>
    
    
  </div>
  <!-- end row -->
    
  <div class="row">    
    <div class="col-lg-12">
      <div class="panel panel-default">  
        <div class="panel-heading">Ultimos 15 registros</div>  
        <table class="table"> 
          <thead> 
            <tr>
              <th>#</th>
              <th>Nombre</th>
              <th>Tipo</th>
              <th colspan="2">Entrada</th>
              <th colspan="2">Salida</th>
            </tr> 
          </thead>
          <tbody>
            <tr *ngFor="let register of registers; let i = index">
              <th scope="row">{{ (i + 1) }}</th>
              <td>{{ register.person?.name }}</td>
              <td>{{ register.person?.type }}</td>
              <td>{{ register.entryTime | date:"medium" }}</td>
              <td>{{ register.entrySector?.name }}</td>
              <td>{{ register.departTime ? (register.departTime | date:"medium") : '-' }}</td>
              <td>{{ register.departSector ? register.departSector?.name : '-' }}</td>
            </tr>
          </tbody> 
        </table> 
      </div>
    </div>
  </div>

</div>
